
= 排列组合计数
:toc:

---

== 计数 Counting principle

==== 分类加法计数原理 Classification of addition counting principle

完成一件事，如果有n类办法，在第1类办法中, 有m1种不同的方法; 在第2类办法中, 有m2种不同的方法‥‥‥，在第n类办法中, 有stem:[ m*n] 种不同的方法，那么完成这件事共有： +

stem:[ N=m1+m2+···+mn] 种不同的方法



==== 分步乘法计数原理

如果实现一个目标, 必须经过n个步骤:

[options="autowidth"]
|===
|Header 1 |第1步 |第2步 |第3步|第4步

|该步骤又可以有n种不同方式来实现
|m
|n
|t
|s

|
4+|那么实现这个目标, 总共就有 stem:[ m*n*t*s] 种方法。
|===

.标题
====
例如：某城市有几个出口: 南边4个, 西边2个, 北边3个,   +
它当前进行封闭式管理:  +
-> 进城, 只能从南或北出口进入,  +
-> 出城, 只能从西或北出口出去. +
那么你进出该城, 有几种方案?

显然, 进城后, 再出城, 是先后的两个步骤, 要用"乘法计数原理".

即:
[options="autowidth"]
|===
|step 1 | |step 2

|进城: 南4 + 北3
| ×
|出城: 西2 + 北3
|===

所以总方案就是:
\begin{align}
(4+3) * (2+3) = 7 * 5 = 35种
\end{align}
====


.标题
====
例如： 现有3种学科的可选教科书:

- 英语: 9种教材可选
- 数学: 7种教材
- 法律: 5种教材

你目前只选两种不同学科的书, 共有多少种选择?

思考: 选两种学科, 就是分步骤的 (就要用乘法), 先选1门, 再选另一门. +
三种学科里面选两种, 就有如下:

[options="autowidth"]
|===
|三选二的方案 |每个方案中的分步骤操作 : step 1 | 乘以|step 2

|英语 + 数学
|第一步, 先选英语 9
|×
|第二步, 再选数学 7

|英语 + 法律
|英语 : 9种选择
|×
|法律 : 5种选择

|数学 + 法律
|数学: 7种选择
|×
|法律 : 5种选择
|===

所以总共有:
\begin{align}
(9*7) + (9*5) +(7*5) =143 种方案
\end{align}

====


---

== 排列 Arrangement

==== 排列 -> stem:[ A_n^m = n (n-1)(n-2) ... (n-m+1)]

从n个不同的元素中, 取出m个元素(stem:[ m \le n]), 排成一列, 共有多少种不同的排法? 可以记为: stem:[ A_n^m]. A是 arrangement 排列

.标题
====
例如： 团队中有四个人: a, b, c, d, 从中取3个人组成一个子小组, 子小组的可能性有多少种?

思考: 取3个人, 就是一个分步骤的操作:

- 第一步先选出第1个人, 4个人就有4种取法;
- 第二步, 选出第2个人, 在剩下的3个人里面选;
- 第三步, 选出第3个人, 在剩下的2个人里面选.

所以共有:
\begin{align}
4*3*2 =24 种"子小组"的可能性
\end{align}

也即: stem:[ A_4^3 = 4*3*2 = 24]

====

\begin{align}
& \boxed{
A_n^m = n (n-1)(n-2) ... (n-m+1)
} \\
& 即:
A_n^m = \underbrace{n}_{第1步中的可选元素数} * \underbrace{(n-1)}_{第2步中的可选元素数}  * (n-2)  * ... * \underbrace{(n-m+1)}_{最后一步中的可选元素数}
\end{align}

为什么最后一项可选的元素数量是 stem:[n-m+1 ]? 因为如果是 stem:[ A_n^n] 的话, 最后一步肯定只剩最后一个数量的元素可选了, 所以就是 stem:[ n-n +1] , 它不能等于0个元素可选啊! 所以必须要加上1.

上例中:
\begin{align}
A_4^3 = 4* 3 * ... * (4-3+1) <- 最后一步骤,就是还剩2个元素可选.
\end{align}

---

==== 全排列 -> stem:[ A_n^n = n (n-1)(n-2) ... 3 * 2* 1 = n !]

进一步可知:

\begin{align}
\boxed{
A_n^n = n (n-1)(n-2) ... 3 * 2* 1 = n ! <- 即 : n个元素的全排列
}
\end{align}

---

==== 排列 -> stem:[ A_n^m = \frac{n!}{(n-m)!} ]

此外, stem:[ A_n^m] 还可以等于 stem:[ \frac{n!}{(n-m)!}], 推导如下:

\begin{align}
\because A_n^m &= n (n-1)(n-2) ... (n-m+1) \\
&=  n (n-1)(n-2) ... (n-m+1) * \frac{(n-m)(n-m-1) ... *2*1} {(n-m)(n-m-1) ... *2*1} \\
& = \frac{[n (n-1)(n-2) ... (n-m)] * [(n-m+1) * (n-m-1) ... *2*1] <- 分子是 n!} {(n-m)(n-m-1) ... *2*1 <- 分母就是 (n-m)! } \\
& = \frac{n!}{(n-m)!}
\end{align}


.标题
====
例如：某球赛比赛, 共14支参赛队伍, 每队都要与其余各队, 在主, 客场上, 分别比赛一次. 那么问一共要进行多少场比赛?

思考: 所谓"主客场"都要比赛一次, 即两个队要比赛两次:  A(主) vs B(客), 和 A(客) vs B(主).

一场比赛只能有2个队伍参加, 所以本题其实就是问: 从14个元素里面 取2个元素, 一个有多少种排列方式?

即:
\begin{align}
A_{14}^2 = 14*13 =182
\end{align}
====

.标题
====
例如：用 0-9 这10个数字, 可以组成多少个没有重复数字的三位数?

解法1:

思考: 显然, 百位数上不能为0, 所以在百位数上的取法, 就是从1-9 这9个数字中, 中取出1个, 即: stem:[ A_9^1]

十位数和个位数上的取法, 没有限制, 所以我们一次性解决, 就是十个数字中剩下的9个数字中, 取2个元素, 即: stem:[ A_9^2]

所以, 答案就是:
\begin{align}
 \underbrace{A_9^1}_{第一步:百位数上的取法数量} *  \underbrace{A_9^2}_{第二步:十位数和个位数,整体这两位数的取法数量} = 9 * (9 * 8) = 648
\end{align}

'''

解法2 :

我们可以倒过来做: 就直接10取3, 然后里面混进了百分位为0的两位数(比如 "034, 095"之类), 那么我们单独把所有的两位数, 抠除出去即可. 即:

\begin{align}
& A_{10}^3 - A_9^2  \\
&= 10*(9*8) - 9*8 = 9*(9*8) = 648
\end{align}

上面的 stem:[ A_9^2] 就是从 1-9 这9个数字里面, 取2个数字, 即所有两位数的数量.
====



---


== 组合 Combination

==== 组合 -> stem:[C_n^m =\frac{ A_n^m} {A_m^m} = \frac{n(n-1)(n-2)...(n-m+1)} {m!} ]

组合:: 从 n个不同的元素中，任取 m（m ≤ n）个元素, *不管其顺序* 合成一组，叫作 从n个不同元素中取出m个元素的一个组合。 +
所有这样的组合的总数, 称为"组合数". 记作: stem:[ C_n^m]


注意: 因为 Combination 是只管取出m个元素, 不管这m个元素的内部是如何排序的, 所以也就有:
\begin{align}
& C_n^m * A_m^m = A_n^m  \\
& (A_m^m 即 m!)
\end{align}
即: 把每一个"组合", 再进行内部全排序, 就会变成"排列"了.

所以, 我们就能从上式, 得出 Combination 的计算公式了:
\begin{align}
C_n^m &=\frac{ A_n^m} {A_m^m} \\
&= \frac{n(n-1)(n-2)...(n-m+1)} {m!}
\end{align}

.标题
====
例如：
\begin{align}
C_5^3 = \frac{A_5^3}{3!} = \frac{5*4*3}{3*2*1} = 10
\end{align}
====

---

==== 组合 -> stem:[C_n^m = \frac{n!} {(n-m)! * m!}]

因为 "排列"还有另一个公式:  stem:[ A_n^m = \frac{n!}{(n-m)!} ]

所以, "组合"就也可以得出另一个公式:
\begin{align}
C_n^m &=\frac{ A_n^m} {A_m^m}
= \frac{\dfrac{n!}{(n-m)!}} {m!}
= \frac{n!} {(n-m)! * m!}
\end{align}

---

==== stem:[ C_n^0 = 1 ]

stem:[ C_n^0 = 1 ] 这怎么理解?
也就是 从n个元素中取0个元素, 组成的"组合" 为什么 =1 ?

可以这样理解: 从n个元素中, 一个也不取, 就是只有这1种情况 -- "一个也不取".

---

==== 组合 -> stem:[ C_n^m = C_n^{n-m}]

推导如下:
\begin{align}
& 因为我们已知:  C_n^m = \frac{n!} {(n-m)! * m!} \\
& 将 C_n^{n-m} 代入上式中: \\
&  C_n^{n-m} =  \frac{n!} {(n-(n-m))! * (n-m)!}
= \frac{n!}{m! * (n-m)!}
= C_n^m
\end{align}

所以可以推导出, stem:[ C_n^{n-m}] 和 stem:[ C_n^m ] 是等价的.

即: \begin{align}
\boxed{
 C_n^m = C_n^{n-m}
}
\end{align}

例如:
\begin{align}
C_7^6 = C_7^{7-6} = C_7^1 = \frac{A_7^1}{1!} = 7
\end{align}


.标题
====
例如： 你有17名属下,  +

(1) 选11人组成一个足球队, 有多少种方案?  +
即: 17选11 :
\begin{align}
C_{17}^{11}
\end{align}

(2) 在选出的11人的同时, 还要确定一位当守门员, 共有多少种方案? <- 显然,这是一个分步操作, 第一步是从17人种选11人, 第二步是从这11人种选1位守门员.
即:

\begin{align}
C_{17}^{11} * C_{11}^1
\end{align}

====


.标题
====
例如：在100枚硬币中, 有98枚铜币, 2枚金币. 从这100枚中任意取出2枚. 问:

(1) 共有多少种不同的取法? +
就是 100 取 3 , 不需要排序. 即:
\begin{align}
C_{100}^3 = \frac{A_{100}^3 }{3!} = 161700
\end{align}

'''

(2) 取出的3枚中, 恰好有1枚是金币的取法, 有多少种? +
即分步骤操作: 第一步, 2取1, 取出1枚金币; 第二步: 在剩下的98枚铜币中, 取出2枚. 即:
\begin{align}
C_2^1 * C_{98}^2
\end{align}

'''

(3)  取出的3枚中, 至少有1枚是金币的取法, 有多少种? +
即, "只取出1枚金币", 和"取出了2枚金币" 的总和情况. 即:
\begin{align}
(C_2^1 * C_{98}^2) + (C_2^2 * C_{98}^1)
\end{align}
即 (2金取1, 再98铜取2, 共三枚);  和  (2金取2, 再98铜取1, 共三枚).

这题也可以反过来做: 先全混在一起 100取3, 然后再在里面扣除掉"3枚都是铜币"的情况, 即 98铜取3. 剩下的就是至少含有1枚金币的情况了:
\begin{align}
C_{100}^3 - C_{98}^3
\end{align}
====


.标题
====
例如：从 1,3,5,7 (假设叫集合A) 中任取2个数字; 从0,2,4,6,8 (假设叫集合B) 中任取2个数字, 组成没有重复数字的四位数. 问这样的四位数一共有多少个?

思考: 注意到这些数字里面有个0, 如果组成4位数的话, 0不能放在千位数上. 所以, 我们要分开来计算: 4位数中含有0的情况, 和4位数中不包含0的情况:

- 不包括0的情况:   +
就是, 从集合B中4取2 (即去掉0后, 集合B中就剩4个数字), 从集合A中 4取2. 然后把这选出的4个数字, 进行"全排列".  即:
\begin{align}
C_4^2 * C_4^2 * A_4^4
\end{align}

- 包括0的情况: 步骤: 先取出4个数字, 然后再来考虑它千分位上不能放0的情况:

1. 从集合A中, 4取2. 即 stem:[ C_4^2]
2. 从集合B中, 先取0 (因为最终的4位数中,我们必须要包括0! 所以一定要选上它). 即 stem:[ C_1^1 ]
3. 再从集合B中, 选出剩下的1个数(因为题目要求我们在集合B中只能取出2个数, 既然0已经被取出了, 那么我们这里只能再取1个数字了), 即4取1. stem:[ C_4^1]
4. 然后, 把由集合A中的2个数, 和集合B中的两个数(其中包含0), 做全排列. 这个四位数的首位, 不能放0! 所以我们就分成两步来做:  +
-> 第一步: 千分位,是3取1, <-(四个数中排除掉0, 就是由剩下的三个数字来取一个作为千分位) , 即stem:[ C_3^1] +
-> 第二步: 百分位到个位作为一个整体, 来3取3, 并把它们进行排序, 即 stem:[ A_3^3]

上面4个步骤, 合起来就是用"分步乘法计数原理":

\begin{align}
(C_4^2 *  C_1^1 *  C_4^1) * (C_3^1 * A_3^3)
\end{align}

即:
\begin{align}
[\underbrace{C_4^2}_{集合A中4取2}  *  \underbrace{C_1^1}_{集合B中取出数字0} *  \underbrace{C_4^1}_{集合B中4取1}]  * [\underbrace{C_3^1}_{千分位上不能出现0} * \underbrace{A_3^3}_{百分位到个位上的3个数,做全排列}]
\end{align}

- 所以, 把"不含0"的四位数, 和"包含0"的四位数, 这两种情况加总, 就是:
\begin{align}
(C_4^2  C_4^2  A_4^4) + ( C_4^2   C_4^1  C_3^1  A_3^3)
\end{align}

====


.标题
====
例如：你旅游回来, 买了5件土特产A 和 3件土特产B, 送给8位好友, 每人一件, 不同的分法有多少种?

思考: 一人一件,  则物配人, 就是人配物. 我们可以从人的角度, 去得到那些物. 即: 8人种取出5人, 来得到A物品; 剩下的就去得到B物品.  +
因为品类中的物品都是相同的,所以各品类内部, 不需要做排序.

\begin{align}
C_8^5 * C_3^3
\end{align}

====

.标题
====
例如： 高考的 3+3模式, 即: 语数英3门必选, 剩下的6门课程中,6选3.  那么 A,B 两人, 选中至少两门相同的情况, 有多少种?

思考: 语数英是必选的, 不用去考虑. 所以我们只需在剩下的6门中, 来考虑不同选择情况.  +
那么两个人所选的, 至少有两门是相同的, 也就是说, 既可以是两门相同, 也可以是三门相同.

- 三门相同的情况, 就是比如第一步: A学生 6选3  (stem:[ C_3^6]); 第二步: B就从A所选的3门里面, 选3门  (stem:[ C_3^3]). 因为6门里面,A选完了之后, B可以重复进去选, 没说只能A选不能B选:
\begin{align}
C_6^3 * C_3^3
\end{align}

- 两门相同的情况, 就是比如: +
-> 第一步, A学生 6选2  (stem:[ C_6^2])(之后B也会选这2门); A再在剩下的4门里面选1门 (stem:[ C_4^1]), 总共构成3门. +
-> 第二步, B来选,先从A选中的2门里面选2门  (stem:[ C_2^2]), 然后再从A没有选择的剩下的3门里面, 再选1门  (stem:[ C_3^1]).

\begin{align}
(C_6^2 * C_4^1) * (C_2^2 * C_3^1)
\end{align}

====


.标题
====
例如： 有7名员工, 分别是 A,B,C..., 他们需要在连续的7天中每人值一天班. 那么B排在C之后的排法数,共有多少?

思考: 我们可以直接把CB两个人的固定顺序, 打包在一起, 看做是一个人. 于是本地就可以看做是 6取6, 并排序. 即:
\begin{align}
A_6^6
\end{align}

====


.标题
====
例如：你有6名心腹 (a,b,c,h,i,j), 需要派到3个边境州(stem:[X,Y,Z])去镇守.每个州安排两人(每州两个编制). a必须安排到 X州, b和c不能安排到同一个州. 那么安排方案能有多少种?

思考: b, c 必须拆开, 那么其实就可以分两类情况:


[cols="1a,4a"]
|===
|Header 1 |Header 2

|第一类: b,c 中的一人, 在X州
|- 第一步, X州的两个编制, 其中一个已经被a占了, 所以剩下的一个编制, 就是从 b,c 两人中来取了, 即stem:[ C_2^1 ], 这样 b,c 就不会再碰到一起了.
- 第二步, Y州的两个编制 : 就从剩下的4人中来取2人了, 即 stem:[ C_4^2]
- 第三步, Z州的两个编制: 就从剩下的2人中来取2人了, 即 stem:[ C_2^2]

|第二类: b,c 分别在Y,Z州
|我们先来把 b,c, 安排掉

- 第一步: Y州的两个编制, 其中一个给 b,c 两人中的一人, 即stem:[ C_2^1 ],  +
剩下的一个编制之后处理.
- 第二步: Z州的两个编制. 就给 b,c 中的剩下一个人, 即stem:[ C_1^1 ].  +
还有一个编制之后处理.
- 第三步: X州的两个编制, 其中一个编制已经有a了. 所以现在, X,Y,Z三个州, 每州各有一个编制还空着. 我们就从 6名心腹中剩下的3个人, 来派给这三个编制了, 显然, 他们需要排序. 即 stem:[ A_3^3 ]
|===

所以, 本题的答案就是:
\begin{align}
(C_2^1 C_4^2 C_2^2) + (C_2^1 C_1^1 A_3^3)
\end{align}
====


---

== 二项式定理 binomial theorem

stem:[ (a+b)^2 = a^2 + 2ab + b^2] +
stem:[ (a+b)^3 = a^3 + 3a^2b +3ab^2 + b^3] +
stem:[ (a+b)^4=a^4 + 4a^3b +6a^2b^2 +4ab^3 +b^4]


即, 可以将 x+y 的任意次幂, 展开成"和"的形式:

\begin{align}
\boxed{
(a+b)^n = C_n^0 a^n b^0 + C_n^1 a^{n-1} b^1 + C_n^2 a^{n-2} b^2 + ... C_n^{n-1} a^1 b^{n-1} + C_n^n a^0 b^n
}
\end{align}

可以看出规律:

- 二项式展开式每一项Term包括三个部分：二项式系数，a的幂，b的幂，Term由三个部分的乘积构成。

- 等号后面, 每一项的a与b的指数的和, 就等于等号前面的指数, 如:stem:[ (a+b)^3 ]的指数是3, 它展开后的每一项: ab指数的和都是3.
- 每一项的 a的指数, 依次递减, 从 stem:[ n, n-1, n-2,... 1,0]
- 每一项的 b的指数, 依次递增, 从 stem:[ 0, 1, 2 ,... n-2, n-1, n]
- 等号右边的总项数是多少呢? 共有 n+1 个 (数一数a或b的指数数量, 也可以算出来, 比如a, 从n降到 1, 0, 即 n+1 个项数 )
- 每项前面的系数是什么规律呢? 系数是个组合数, 从stem:[ C_n^0 到 C_n^n ], 右上角的指数数字同 b 的指数数字完全一致.








---


https://www.bilibili.com/video/BV147411K7xu?p=220



7:11

